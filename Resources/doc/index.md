BeelabTagBundle Documentation
=============================

## Installation

1. [Installation](#1-installation)
2. [Configuration](#2-configuration)
3. [Usage](#3-usage)

### 1. Installation

Run from terminal:

```bash
$ php composer.phar require beelab/tag-bundle:1.*
```

Enable bundle in the kernel:

```php
<?php
// app/AppKernel.php

public function registerBundles()
{
    $bundles = array(
        // ...
        new Beelab\TagBundle\BeelabTagBundle(),
    );
}
```

### 2. Configuration

Create a ``Tag`` entity class.
Example:

```php
<?php
// src/Acme/DemoBundle/Entity

namespace Acme\DemoBundle\Entity;

use Beelab\TagBundle\Tag\TagInterface 
use Doctrine\ORM\Mapping as ORM;

/**
 * Tag
 *
 * @ORM\Table(name="tag")
 * @ORM\Entity()
 */
class Tag implements TagInterface
{
    // ...
    protected $name;

    public function setName($name)
    {
        $this->name = $name;
    }
    
    // ... implement all methods required by interface
}
```

Insert in main configuration:

```yaml
# app/config/config.yml

# BeelabTag Configuration
beelab_tag:
    tag_class: Acme\DemoBundle\Entity\Tag
```

Then you can create some entities that implement ``TaggableInteface``.

Suppose you want to use tags on an ``Article`` entity:

```php
<?php
// src/Acme/DemoBundle/Entity

namespace Acme\DemoBundle\Entity;

use Beelab\TagBundle\Tag\TaggableInterface
use Doctrine\ORM\Mapping as ORM;

/**
 * Article
 *
 * @ORM\Table(name="article")
 * @ORM\Entity()
 */
class Article implements TaggableInterface
{
    /**
     * @ORM\ManyToMany(targetEntity="Tag", inversedBy="articles")
     * @ORM\JoinTable(name="article_tag",
     *     joinColumns={@ORM\JoinColumn(name="article_id", referencedColumnName="id", onDelete="cascade")},
     *     inverseJoinColumns={@ORM\JoinColumn(name="tag_id", referencedColumnName="id", onDelete="cascade")}
     * )
     */
    protected $tags;

    // note that you must change code generated by Doctrine,
    // replacing "Tag" with "TagInterface" where appropriate

    /**
     * Add tag
     *
     * @param  Tag     $tag
     * @return Article
     */
    public function addTag(TagInterface $tag)
    {
        $this->tags[] = $tag;

        return $this;
    }

    // ... implement all methods required by interface
}
```

### 3. Usage

Most simple usage is in a Form like this one:

```php
<?php
// src/Acme/DemoBundle/Form/Type/ArticleFormType

namespace Acme\DemoBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
// ...

class ArticleType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('tagsText', 'text', array('required' => false, 'label' => 'Tags'))
            // other fields...
        ;
    }
}
```

You'll not need anything else (e.g. modifying your controllers), since BeelabTagBundle
will take care of saving each Tag and adding them to your ``Article`` entity.